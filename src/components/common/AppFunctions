import { useContext } from "react";
import { PointType } from '../common/AppTypes';
import { GlobalStateContext } from "../providers/GlobalStateProvider";
import { db } from "../common/db";

const { globalState, setGlobalState } = useContext(GlobalStateContext);

//DB_matchDataテーブル更新関数
export const matchDataDBupdate = (name:string, value:string|number) => {
    db.matchData.get({id:globalState.recodingMatchId}).then((md)=>{
        if(md !== undefined){
            const newData:PointType[] = JSON.parse(JSON.stringify(md.data));
            const keyName: keyof PointType = name as keyof PointType;
            newData[md.currentPointId][keyName] = value;
            db.matchData.update(globalState.recodingMatchId,{data:newData});
        }
    });
};